{% extends "base.html" %}

{% block content %}
<h2 style="text-align: center; margin-bottom: 20px; color: #fff;">Event Display</h2>

<div style="text-align: center; margin-bottom: 20px;">
    <a href="{{ url_for('main.display_events', sort_by='date') }}" 
       style="padding: 10px; margin: 5px; background: {% if sort_by == 'date' %}#007bff{% else %}#ccc{% endif %}; 
       color: white; text-decoration: none; border-radius: 5px;">
        Sort by Date
    </a>
    <a href="{{ url_for('main.display_events', sort_by='priority') }}" 
       style="padding: 10px; margin: 5px; background: {% if sort_by == 'priority' %}#007bff{% else %}#ccc{% endif %}; 
       color: white; text-decoration: none; border-radius: 5px;">
        Sort by Priority
    </a>
</div>

<!-- Overdue Tasks -->
<h3 style="color: #dc3545; text-align: left;">Overdue Tasks</h3>
<div style="display: flex; flex-direction: column; margin-bottom: 20px;">
    {% for event in categorized['overdue'] %}
    <div style="margin: 10px 0; padding: 20px; background: #f8d7da; color: #721c24; border: 1px solid #721c24; border-radius: 10px;">
        <h3>{{ event['title'] }}</h3>
        <p><strong>Description:</strong> {{ event['description'] }}</p>
        <p><strong>Time:</strong> {{ event['start_time'] }} - {{ event['end_time'] }}</p>
        <p><strong>Priority:</strong> <span style="color: white; padding: 5px; background: 
            {% if event['priority'] == 'Urgent' %}#dc3545{% 
            elif event['priority'] == 'Important' %}#ffc107{% 
            else %}#28a745{% endif %}; border-radius: 3px;">{{ event['priority'] }}</span></p>
    </div>
    {% endfor %}
</div>

<!-- Other Categories -->
{% for category, events in categorized.items() %}
    {% if category != 'overdue' %}
    <h3 style="color: #fff; text-align: left;">{{ category.capitalize() }} Tasks</h3>
    <div style="display: flex; flex-direction: column; margin-bottom: 20px;">
        {% for event in events %}
        <div style="margin: 10px 0; padding: 20px; background: 
            {% if event['priority'] == 'Urgent' %}#f8d7da{% 
            elif event['priority'] == 'Important' %}#fff3cd{% 
            else %}#d4edda{% endif %}; 
            color: 
            {% if event['priority'] == 'Urgent' %}#721c24{% 
            elif event['priority'] == 'Important' %}#856404{% 
            else %}#155724{% endif %}; 
            border: 1px solid #444; border-radius: 10px;">
            <h3>{{ event['title'] }}</h3>
            <p><strong>Description:</strong> {{ event['description'] }}</p>
            <p><strong>Time:</strong> {{ event['start_time'] }} - {{ event['end_time'] }}</p>
            <p><strong>Priority:</strong> <span style="color: white; padding: 5px; background: 
                {% if event['priority'] == 'Urgent' %}#dc3545{% 
                elif event['priority'] == 'Important' %}#ffc107{% 
                else %}#28a745{% endif %}; border-radius: 3px;">{{ event['priority'] }}</span></p>
        </div>
        {% endfor %}
    </div>
    {% endif %}
{% endfor %}
{% endblock %}
